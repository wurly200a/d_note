#include "common.h"

/* 外部関数定義 */
#include "MainWnd.h"

/* 外部変数定義 */
/* 内部関数定義 */
static BOOL initializeApp( HINSTANCE, int);

/* 内部変数定義 */
static HINSTANCE hInstance;    /* インスタンスのハンドラ     */
static TCHAR szAppName[] = TEXT("hdt"); /* アプリケーションの名称 */

/********************************************************************************
 * 内容  : WINDOWSプログラムのエントリポイント
 * 引数  : HINSTANCE hInstance     インスタンスのハンドラ
 * 引数  : HINSTANCE hPrevInstance このプログラムが直前に実行されていたインスタンスのハンドラ
 * 引数  : PSTR szCmdLine          プログラムの起動のために使われたコマンド行
 * 引数  : int iCmdShow            プログラムの初期表示の形態の指定
 * 戻り値: int
 ***************************************/
int WINAPI
WinMain( HINSTANCE hInstance, HINSTANCE hPrevInstance, PSTR szCmdLine, int nCmdShow )
{
    MSG msg;

    if( !initializeApp( hInstance, nCmdShow ) )
    {
        MessageBox(NULL, "couldn't start!", NULL, MB_OK);
        return 0;
    }

    while( GetMessage( &msg, NULL, 0, 0 ) )
    {
        if( !IsMainWndMessage( &msg ) )
        {
            TranslateMessage( &msg ) ;
            DispatchMessage( &msg ) ;
        }
    }

    return msg.wParam; /* PostQuitMessage()の引数 */
}


/********************************************************************************
 * 内容   : アプリケーションの初期化
 * 引数   : HINSTANCE hInst
 * 引数   : int nCmdShow
 * 戻り値 : BOOL
 ***************************************/
static BOOL
initializeApp( HINSTANCE hInst, int nCmdShow )
{
    hInstance = hInst;
    return MainWndCreate( nCmdShow ); /* メインウィンドウ生成 */
}

/********************************************************************************
 * 内容   : インスタンスハンドラの取得
 * 引数   : なし
 * 戻り値 : HINSTANCE
 ***************************************/
HINSTANCE
GetHinst( void )
{
    return hInstance;
}
/********************************************************************************
 * 内容   : アプリケーションの名称文字列の取得
 * 引数   : なし
 * 戻り値 : PTSTR
 ***************************************/
PTSTR
GetAppName( void )
{
    return szAppName;
}
